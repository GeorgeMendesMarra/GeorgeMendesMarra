<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Formulário 5 — Pattern e mensagens</title>
</head>
<body>
  <h2>5 — Validação com pattern</h2>

  <form id="form" action="#" method="post" novalidate>
    <!-- O atributo pattern define uma expressão regular -->
    <label for="telefone">Telefone (Formato: 99-99999-9999):</label>
    <input id="telefone" name="telefone" type="tel"
           pattern="^\d{2}-\d{5}-\d{4}$"
           placeholder="11-99999-9999" required>

    <label for="cep">CEP (5 dígitos-3 dígitos):</label>
    <input id="cep" name="cep" type="text"
           pattern="^\d{5}-\d{3}$"
           placeholder="12345-678" required>

    <button type="submit">Enviar</button>
  </form>

  <script>
    const form = document.getElementById('form');
    form.addEventListener('submit', (e) => {
      const tel = document.getElementById('telefone');
      const cep = document.getElementById('cep');

      // Define mensagens personalizadas se o formato estiver incorreto
      if (!tel.checkValidity())
        tel.setCustomValidity('Telefone inválido. Use 11-99999-9999');
      else tel.setCustomValidity('');

      if (!cep.checkValidity())
        cep.setCustomValidity('CEP inválido. Use 12345-678');
      else cep.setCustomValidity('');

      // Impede o envio se houver erro
      if (!form.checkValidity()) {
        e.preventDefault();
        form.reportValidity();
      }
    });
  </script>
</body>
</html>
