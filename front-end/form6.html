<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Formulário 6 — Senha e força</title>
  <style>
    /* Barra de força da senha */
    #forca { height:8px; background:#eee; margin-top:6px; }
    #forca > span { display:block; height:100%; width:0%; }
  </style>
</head>
<body>
  <h2>6 — Senha com confirmação e medidor</h2>

  <form id="f" action="#" method="post">
    <label for="senha">Senha:</label>
    <input id="senha" name="senha" type="password" required>

    <!-- Barra visual de força -->
    <div id="forca"><span></span></div>
    <small id="forcaText"></small>

    <label for="confirma">Confirme a senha:</label>
    <input id="confirma" name="confirma" type="password" required>

    <button type="submit">Registrar</button>
  </form>

  <script>
    const senha = document.getElementById('senha');
    const confirma = document.getElementById('confirma');
    const barra = document.querySelector('#forca > span');
    const texto = document.getElementById('forcaText');

    // Mede a força da senha conforme o usuário digita
    senha.addEventListener('input', () => {
      const s = senha.value;
      let score = 0;
      if (s.length >= 8) score++;
      if (/[A-Z]/.test(s)) score++;
      if (/[0-9]/.test(s)) score++;
      if (/[^A-Za-z0-9]/.test(s)) score++;
      const pct = (score / 4) * 100;

      // Atualiza a cor e o texto conforme a força
      barra.style.width = pct + '%';
      if (pct < 50) { barra.style.background = 'red'; texto.textContent = 'Fraca'; }
      else if (pct < 75) { barra.style.background = 'orange'; texto.textContent = 'Média'; }
      else { barra.style.background = 'green'; texto.textContent = 'Forte'; }
    });

    // Verifica se as senhas coincidem ao enviar
    document.getElementById('f').addEventListener('submit', (e) => {
      if (senha.value !== confirma.value) {
        e.preventDefault();
        alert('As senhas não coincidem.');
      }
    });
  </script>
</body>
</html>
