<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Redirecionamento em 10s — Mini Timer</title>
<style>
  :root{
    --bg: #071026;
    --card: #0b1a2b;
    --accent: #ff6b6b;
    --accent-2: #06d6a0;
    --muted: #9fb1c9;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background: linear-gradient(180deg,#021026 0%, #071a2b 100%);
    color:#e6eef8;
    font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    padding:20px;
  }

  .card{
    width:100%;
    max-width:720px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px;
    padding:24px;
    box-shadow: 0 10px 30px rgba(2,8,23,0.7);
    border:1px solid rgba(255,255,255,0.03);
  }

  header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    margin-bottom:12px;
  }
  h1{ font-size:20px; margin:0; }
  p.lead{ margin:0; color:var(--muted); font-size:14px; }

  .timer {
    display:flex;
    align-items:center;
    gap:18px;
    margin-top:18px;
  }

  .count{
    font-size:64px;
    font-weight:800;
    line-height:1;
    width:120px;
    text-align:center;
  }

  .progress-wrap{
    flex:1;
  }
  .bar{
    height:18px;
    width:100%;
    background: rgba(255,255,255,0.04);
    border-radius:999px;
    overflow:hidden;
    position:relative;
  }
  .bar > .fill{
    position:absolute;
    left:0; top:0; bottom:0;
    width:0%;
    background: linear-gradient(90deg,var(--accent), var(--accent-2));
    transition: width 0.2s linear;
  }
  .controls{
    margin-top:18px;
    display:flex;
    gap:10px;
    justify-content:flex-end;
  }
  button{
    border: none;
    padding:10px 14px;
    border-radius:8px;
    cursor:pointer;
    font-weight:700;
  }
  .btn-cancel{ background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.03); }
  .btn-skip{ background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#021018; }

  .note{ margin-top:12px; color:var(--muted); font-size:13px; }

  @media (max-width:560px){
    .timer{ flex-direction:column; align-items:stretch; }
    .count{ font-size:48px; width:100%; text-align:left; }
    .controls{ justify-content:stretch; flex-direction:column-reverse; }
  }
</style>
</head>
<body>
  <div class="card" role="region" aria-label="Temporizador de redirecionamento">
    <header>
      <div>
        <h1>Redirecionando em breve</h1>
        <p class="lead">Você será levado ao site <strong>uol.com.br</strong> após a contagem regressiva.</p>
      </div>
      <div aria-hidden="true">⏱️</div>
    </header>

    <div class="timer" aria-live="polite">
      <div class="count" id="count">10</div>
      <div class="progress-wrap">
        <div class="bar" id="bar" aria-hidden="true">
          <div class="fill" id="fill"></div>
        </div>
      </div>
    </div>

    <div class="controls">
      <button class="btn-cancel" id="cancelBtn" type="button">Cancelar</button>
      <button class="btn-skip" id="skipBtn" type="button">Ir agora</button>
    </div>

    <div class="note" id="note">Contagem: <span id="noteSeconds">10</span> segundos restantes.</div>
  </div>

<script>
  (function(){
    const TOTAL = 10; // segundos
    const countEl = document.getElementById('count');
    const fillEl = document.getElementById('fill');
    const barEl = document.getElementById('bar');
    const noteSec = document.getElementById('noteSeconds');
    const cancelBtn = document.getElementById('cancelBtn');
    const skipBtn = document.getElementById('skipBtn');

    let remaining = TOTAL;
    let started = Date.now();
    let rafId = null;
    let intervalId = null;
    const targetUrl = 'https://www.uol.com.br';

    function updateVisual(){
      countEl.textContent = Math.max(0, Math.ceil(remaining));
      noteSec.textContent = Math.max(0, Math.ceil(remaining));
      const pct = Math.max(0, ((TOTAL - remaining) / TOTAL) * 100);
      fillEl.style.width = pct + '%';
    }

    function tick(){
      const now = Date.now();
      const elapsed = (now - started) / 1000;
      remaining = TOTAL - elapsed;
      if (remaining <= 0) {
        remaining = 0;
        updateVisual();
        doRedirect();
        stopTimers();
        return;
      }
      updateVisual();
      rafId = requestAnimationFrame(tick);
    }

    function startTimers(){
      started = Date.now();
      // Ensure visual updates smoothly
      rafId = requestAnimationFrame(tick);
      // safety interval to update even if tab throttles RAF
      intervalId = setInterval(() => {
        const now = Date.now();
        remaining = TOTAL - ((now - started)/1000);
        if (remaining <= 0) {
          remaining = 0;
          updateVisual();
          doRedirect();
          stopTimers();
        } else {
          updateVisual();
        }
      }, 250);
    }

    function stopTimers(){
      if (rafId) cancelAnimationFrame(rafId);
      if (intervalId) clearInterval(intervalId);
      rafId = null;
      intervalId = null;
    }

    function doRedirect(){
      // final visual fill
      fillEl.style.width = '100%';
      countEl.textContent = '0';
      noteSec.textContent = '0';
      // Small delay so user sees 0 briefly
      setTimeout(() => {
        // Redirect in same tab:
        window.location.href = targetUrl;
      }, 250);
    }

    cancelBtn.addEventListener('click', () => {
      stopTimers();
      // show cancelled state
      document.getElementById('note').textContent = 'Redirecionamento cancelado.';
      countEl.textContent = '—';
      fillEl.style.width = '0%';
      cancelBtn.disabled = true;
      skipBtn.disabled = false;
    });

    skipBtn.addEventListener('click', () => {
      stopTimers();
      doRedirect();
    });

    // Start when page loads
    startTimers();

    // Accessibility: allow Esc to cancel, Enter to skip
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') cancelBtn.click();
      if (e.key === 'Enter') skipBtn.click();
    });
  })();
</script>
</body>
</html>
